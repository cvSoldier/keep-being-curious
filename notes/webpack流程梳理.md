![一张大图](./assets/webpack%E6%B5%81%E7%A8%8B%E6%A2%B3%E7%90%86.png)

### Q&A
Q: Webpack 编译过程会将源码解析为 AST 吗？  
A: 构建阶段会读取源码，解析为 AST 集合  

Q: webpack 与 babel 分别实现了什么?  
A: Webpack 读出 AST 之后仅收集模块依赖关系，然后去递归处理子模块；  
babel 是把高版本语法编译成低版本语法，确保新的es特性也能在浏览器中运行。  
webpack 通过 babel-loader 使用 babel 

Q: webpack打包流程？  
A: 主要分为三部分：  
初始化阶段  
根据配置文件、配置对象等和默认配置结合成最终配置，创建compiler等上下文，注入各种内部插件。  
构建阶段  
首先是编译的 make 钩子，从 entry 创建 module 对象，调用loader将模块转译为标准js内容，调用acorn把内容转换为ast对象，从中找出该模块的依赖模块，再递归地执行这个流程，处理完成后，得到每个模块翻译后的内容，以及它们之间的依赖关系图。  
生成阶段  
seal钩子，根据入口和模块之间的依赖关系，组装成一个个包含多个模块的chunk，再把每个chunk转化成单独的文件加入输出列表。  
emit钩子，根据配置的输出路径和文件名，把文件写入文件系统

Q: 构建阶段是哪个hook？